{% extends 'base.html' %}
{% load static %}

{% block title %}Send Motivated Post â€” MindScan{% endblock %}

{% block nav_links %}
<li><a href="{% url 'ViewUsers' %}" id="nav-users">View Users</a></li>
<li><a href="{% url 'ViewPosts' %}" id="nav-posts">View Posts</a></li>
<li><a href="{% url 'SendMotivatedPost' %}" class="active" id="nav-send">Send Message</a></li>
<li><a href="{% url 'ViewMotivatedPost' %}" id="nav-view">View Motivated</a></li>
<li><a href="{% url 'index' %}" id="nav-logout">Logout</a></li>
{% endblock %}

{% block content %}
<div class="auth-page">
	<div class="page-form-card">
		<div class="auth-header">
			<div class="auth-icon">ðŸ’Œ</div>
			<h2>Send Motivated Post</h2>
			<p>Send an uplifting message to a user who needs support</p>
		</div>

		{% if data %}
		<div
			class="alert alert-{% if 'success' in data|lower or 'sent' in data|lower %}success{% else %}danger{% endif %}">
			<i
				class="fas fa-{% if 'success' in data|lower or 'sent' in data|lower %}check-circle{% else %}exclamation-circle{% endif %}"></i>
			{{ data }}
		</div>
		{% endif %}

		<form name="f1" method="post" action="{% url 'SendMotivatedPostData' %}" onsubmit="return validate(this);">
			{% csrf_token %}

			<div class="form-group">
				<label class="form-label" for="smp-username">Recipient Username</label>
				<div class="input-wrapper">
					<i class="fas fa-user input-icon"></i>
					<input class="form-input" type="text" id="smp-username" name="t1"
						placeholder="Enter recipient's username" />
				</div>
			</div>

			<div class="form-group">
				<label class="form-label" for="smp-posttime">Post Time</label>
				<div class="input-wrapper">
					<i class="fas fa-clock input-icon"></i>
					<input class="form-input" type="text" id="smp-posttime" name="t2"
						placeholder="e.g. 2025-01-15 10:30 AM" />
				</div>
			</div>

			<div class="form-group">
				<label class="form-label" for="smp-message">Motivational Message</label>
				<textarea class="form-input no-icon" id="smp-message" name="t3"
					placeholder="Write an uplifting, encouraging message hereâ€¦" rows="4"
					style="resize:vertical; padding-left:1rem;"></textarea>
			</div>

			<button type="submit" class="form-submit">
				<i class="fas fa-paper-plane"></i> &nbsp;Send Message
			</button>
		</form>

		<div class="auth-footer-link mt-2">
			<a href="javascript:history.back()"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
		</div>
	</div>
</div>
{% endblock %}

{% block scripts %}
<script>
	function validate(formObj) {
		if (formObj.t1.value.length === 0) {
			alert("Please enter the recipient's Username");
			formObj.t1.focus(); return false;
		}
		if (formObj.t2.value.length === 0) {
			alert("Please enter the Post Time");
			formObj.t2.focus(); return false;
		}
		if (formObj.t3.value.length === 0) {
			alert("Please enter a Motivational Message");
			formObj.t3.focus(); return false;
		}
		return true;
	}
</script>
{% endblock %}